---
title: "复刻黑魂教程笔记"
date: 2021-08-17T00:11:26+08:00
draft: false
isCJKLanguage: true
---

### 课程地址：  
第一季：https://www.bilibili.com/video/BV1gW411T7yb  
第二季：https://www.bilibili.com/video/BV1qp411Z7qt  



### Animator Controller 中的trigger 类型会重复累计

比如有这样一个状态 locomotion --> roll，其中声明一个trigger变量触发这个状态的切换，这个时候如果连按两次trigger，人物会进入翻滚状态两次，原因是trigger类型的变量是会累计的

解决方法可以在locomotion里添加一个如下的脚本，声明在回到 locomotion 时候清空进入roll 的 trigger信号

```
public class FSMClearSignals : StateMachineBehaviour
{
    public string[] clearAtEnter;

    // OnStateEnter is called when a transition starts and the state machine starts to evaluate this state
    public override void OnStateEnter(Animator animator, AnimatorStateInfo stateInfo, int layerIndex)
    {
        foreach (var signal in clearAtEnter)
        {
            animator.ResetTrigger(signal);
        }
    }
}
```



### Animator- Interruption Source

Animation Controller 的 state 在 trasition 时，可以被打断   
场景举例：跳跃 --> 下落 --> 落地，但是在 跳跃 --> 下落 的转换过程中（记为 T 好了）检测到落地了，这个时候需要立刻从 下落 --> 落地，但 下落 的状态还没彻底进来，所以需要把T把这个过程打断，直接做这样一个新的transition： T --> 落地  
用 Animator- Interruption Source可以声明这样的设置    
这篇知乎文章介绍的比较详细 https://zhuanlan.zhihu.com/p/36244526  


### 在Animation Clip 中 编辑Curve

Animation Clip 不仅可以编辑Event，还可以编辑Curve，用于表示一个随着动画播放而变化的参数  
比如跳跃动画，在不使用RootMotion的情况下，需要在跳跃的时候给角色施加一个位移（力或者直接是距离），但如果直接在跳跃动画播放的第一帧立刻施加一个力，那么表现就会很差。这里就可以编辑一个随动画播放而变化的参数，即Curve，表示随着动画播放，应该移动的距离/应该施加的力，这样播放跳跃动画的时候，再施加力/直接移动距离，表现上就会更好

### Physics Material
赋予碰撞体一些物理特性的材质，比如动态摩擦力、静态摩擦力、弹性，以及这些物理材质碰到其他物理材质的运行方式    
有一个场景为，站在地面上是，角色的摩擦力应当不为零（比如1）。跳跃起来的时候，为了因为摩擦力导致卡在墙壁上，需要把摩擦力设置为0，跳跃起来的摩擦力计算方式也应该设置为avarage或者multiply

