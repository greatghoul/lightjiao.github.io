---
title: "《游戏开发中的数学与物理》"
date: 2021-04-27T11:49:09+08:00
draft: false
isCJKLanguage: true
---

# 第一章

## 1.3 请将角的单位统一为弧度

为什么计算机中的正弦余弦函数不适用看上去比较亲切易懂的角度，而用了看来不够直观的弧度呢？

其实在近代数学中，三角函数几乎都使用弧度，很少会使用角度。之所以使用弧度而不是使用角度作为角的度量单位，主要是关系到微积分的一些问题。如果坚持不适用弧度的话，三角函数中与微积分相关的一些公式几乎都无法使用，还可能会引发一些严重的问题。特别是游戏中会有与物理相关的公式，稍复杂的情况都会出现微积分的计算，因此读者朋友们在程序中涉及角的度量时，请务必使用弧度而不要使用角度。如果在一个程序中同时使用弧度和角度，就会非常容易出现BUG以及各种问题，因此将角的度量单位无条件统一为弧度这一原则，应当被无条件的贯彻下去。

> ❗ 注意：
>
> 代码中需要将弧度的大小限制在 0 ~ 2π 
>
> 尽管数学中可以任意的将弧度无限大的写下去，但计算机中由于弧度是用浮点数表示的，所以过大的弧度，会导致计算时的精度丢失问题。



## 1.4.1 关于重力加速度的单位

游戏中配置的重力加速度值并不是自然界中平时使用的9.8。众所周知的重力加速度值9.8是真实的地球上的重力加速度，以 `m/s²(米/平方秒)`为单位，并不能在计算机的虚拟空间中适用。计算机所使用的重力加速度单位是特殊的`dot/F²(像素/平方帧)`，请注意区别。

> 书中示例的重力加速度值是 `0.4 dot/F²`
>
> UCC插件中使用的默认重力加速度是`3.92 dot/F²`
>
> > 百度百科：
> >
> > 大多数网页制作常用图片分辨率为72，即每英寸像素72。一英寸等于2.54厘米，那么一厘米大约28像素
>
> 按照一厘米28像素，一秒60帧换算如下：
>
> `9.8 * 28 * 100 / (60 * 60) = 7.62 dot/F²` 
>
> 反过来推算每厘米的像素数：
>
> `3.92 * 60 * 60 / (9.8 * 100) = 14.4 像素/每厘米`
>
> 🤔这个单位换算哪里怪怪的



## 1.4.2 使用积分进行计算重力运行的轨迹

当存在加速度时，一帧的开始时和结束时速度是不一样的，那么要如何计算这一帧的移动距离呢？

可以使用取平均速度来拟合，当然更好的办法是根据加速度、起始速度、时间，求积分，积分结果为移动的距离。

>关于重力加速度造成的竖直方向的移动轨迹计算的比较：
>
>普通的拟合运算： `y = 1/2 * G * t * t + C2`（C2是初始位置）
>
>积分运算： `y = 1/2 * G * t * t + C1 * t + C2`  （ C1是初始速度， C2是初始位置）
>
>显然，随着时间的推移，后面的 `C1 * t` 造成的误差会越来越大

对位置叠加速度，再对速度叠加加速度这一简单算法，再程序中随着时间的推进，误差会越来越大。如果真正的游戏中出现了这种误差，游戏的玩家很可能会认为游戏有问题。

比如球类比赛游戏中，球的旋转以及空气摩擦的影响等因素都必须考虑在内，如果有误差就有可能会影响球的运动轨迹。在动作游戏中，一点微笑的动作偏差都会影响游戏性，最终演变成大问题。

> ❗ 注意：
>
> 那么是不是使用上面的积分来精确计算轨道就万无一失了呢？很遗憾这是不可能的。如果地球上只有重力这一种力的话还没什么问题，但是物体运动往往受到多个复杂的力的共同作用，想精确求得物体每一个瞬间的轨道几乎是不可能的，这种情况下只能根据数据计算物体近似的运动轨道。



## 1.5 物体随机飞溅运动

