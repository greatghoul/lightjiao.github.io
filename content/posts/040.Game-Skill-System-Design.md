---
title: "记录开发过程中遇到的技能系统的特殊情况"
date: 2021-06-22T12:48:10+08:00
draft: false
isCJKLanguage: true
tags:
- GameDev
---


## 子弹
- 子弹监听创建者是否死亡，从而决定是否被销毁
- 子弹的异步创建，或者说高性能创建问题
  
  > 对象池，减少IO
- 子弹的奇奇怪怪的运动轨迹
  - 直线
  - 抛物线（贝塞尔模拟）
  - 正弦
- 施法者死亡的时候子弹依旧造成伤害
  > 子弹获取施法者的属性快照，这里如何做到高性能呢？  
  > “子弹的伤害加成” 是个什么属性？能砍掉吗？

## Buff
- 由于Buff添加Buff、Buff创建子弹、子弹添加Buff、子弹创建子弹，所以出现了获取最原始数据的需求
  
  > 这里最好能改成所有的Buff和子弹全都有Skill触发，Skill为唯一的核心
- Buff的Update最好不要使用零散的Timer，使用统一的一个Update来执行，可以统一处理执行顺序问题
- 两个Buff互相监听属性的修改问题：
  > Buff A的功能是每当有1【HP】增加1【攻击力】  
  >
  > Buff B的功能是每当有1【攻击力】增加1【HP】  
  >
  > 这种情况就会出现一直循环递归下去，导致属性直接爆炸 。Buff监听属性的实现方式有两种：    
  >
  >  - 每次属性变化都发出事件
  >  - Update轮询
  >
  > 但单纯的这两种实现方式都无法解决上述的循环递归的问题，无非是前一个会运行时直接爆栈，后一个不会爆栈但会属性爆炸  
  > 最简单的规避这个问题的方法是，不要这么设计这种玩法，但这在一些刷刷刷或者肉鸽游戏里是难以做到的，这类游戏里常常会有各种道具的叠加，很容易出现这种属性互相叠加的装备。
  >
  > 这个需求的确很蛋疼，对玩家来说也会比较懵逼：我血量和攻击力互相加成，岂不是原地起飞？但这并不妨碍我们的策划放飞自我。
  >
  > 写了一堆，最后还是解决思路我不知道
  > > ❗ 与网友讨论后，暂时得出结论，这个需求是傻逼需求。LOL内测版本有一个装备是血量加攻击力，后来删了，原因就是避免这个傻逼设计。感谢网友们。  
  > > ❗ 如果需要实现这种互相叠加的需求，也要设置清楚边界，比如最多递归三层.etc

